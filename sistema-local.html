<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì Sistema de Gest√£o Escolar - Local</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 1200px;
            width: 90%;
            margin: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }

        .list {
            max-height: 300px;
            overflow-y: auto;
        }

        .list-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-item-info h4 {
            color: #333;
            margin-bottom: 5px;
        }

        .list-item-info p {
            color: #666;
            font-size: 0.9em;
        }

        .list-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 14px;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .sections {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì Sistema de Gest√£o Escolar</h1>
            <p>Vers√£o Local - Funciona sem servidor!</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="totalAlunos">0</h3>
                <p>Alunos</p>
            </div>
            <div class="stat-card">
                <h3 id="totalProfessores">0</h3>
                <p>Professores</p>
            </div>
            <div class="stat-card">
                <h3 id="totalTurmas">0</h3>
                <p>Turmas</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMatriculas">0</h3>
                <p>Matr√≠culas</p>
            </div>
        </div>

        <div class="sections">
            <!-- Se√ß√£o Alunos -->
            <div class="section">
                <h2>üë• Alunos</h2>
                <div class="success-message" id="alunoSuccess"></div>
                <div class="error-message" id="alunoError"></div>
                
                <form id="alunoForm">
                    <div class="form-group">
                        <label>Nome:</label>
                        <input type="text" id="alunoNome" required>
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="alunoEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Idade:</label>
                        <input type="number" id="alunoIdade" min="5" max="100" required>
                    </div>
                    <button type="submit" class="btn">Cadastrar Aluno</button>
                </form>

                <div class="list" id="alunosList"></div>
            </div>

            <!-- Se√ß√£o Professores -->
            <div class="section">
                <h2>üë®‚Äçüè´ Professores</h2>
                <div class="success-message" id="professorSuccess"></div>
                <div class="error-message" id="professorError"></div>
                
                <form id="professorForm">
                    <div class="form-group">
                        <label>Nome:</label>
                        <input type="text" id="professorNome" required>
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="professorEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Disciplina:</label>
                        <input type="text" id="professorDisciplina" required>
                    </div>
                    <button type="submit" class="btn">Cadastrar Professor</button>
                </form>

                <div class="list" id="professoresList"></div>
            </div>

            <!-- Se√ß√£o Turmas -->
            <div class="section">
                <h2>üè´ Turmas</h2>
                <div class="success-message" id="turmaSuccess"></div>
                <div class="error-message" id="turmaError"></div>
                
                <form id="turmaForm">
                    <div class="form-group">
                        <label>Nome da Turma:</label>
                        <input type="text" id="turmaNome" required>
                    </div>
                    <div class="form-group">
                        <label>Ano:</label>
                        <select id="turmaAno" required>
                            <option value="">Selecione...</option>
                            <option value="1¬∫ Ano">1¬∫ Ano</option>
                            <option value="2¬∫ Ano">2¬∫ Ano</option>
                            <option value="3¬∫ Ano">3¬∫ Ano</option>
                            <option value="4¬∫ Ano">4¬∫ Ano</option>
                            <option value="5¬∫ Ano">5¬∫ Ano</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Professor:</label>
                        <select id="turmaProfessor" required>
                            <option value="">Selecione um professor...</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">Criar Turma</button>
                </form>

                <div class="list" id="turmasList"></div>
            </div>

            <!-- Se√ß√£o Matr√≠culas -->
            <div class="section">
                <h2>üìù Matr√≠culas</h2>
                <div class="success-message" id="matriculaSuccess"></div>
                <div class="error-message" id="matriculaError"></div>
                
                <form id="matriculaForm">
                    <div class="form-group">
                        <label>Aluno:</label>
                        <select id="matriculaAluno" required>
                            <option value="">Selecione um aluno...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Turma:</label>
                        <select id="matriculaTurma" required>
                            <option value="">Selecione uma turma...</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">Matricular</button>
                </form>

                <div class="list" id="matriculasList"></div>
            </div>
        </div>
    </div>

    <script>
        // Sistema de armazenamento local
        class LocalStorage {
            static get(key) {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : [];
            }

            static set(key, data) {
                localStorage.setItem(key, JSON.stringify(data));
            }

            static add(key, item) {
                const data = this.get(key);
                item.id = Date.now() + Math.random();
                data.push(item);
                this.set(key, data);
                return item;
            }

            static remove(key, id) {
                const data = this.get(key);
                const filtered = data.filter(item => item.id !== id);
                this.set(key, filtered);
            }
        }

        // Gerenciador do sistema
        class SistemaGestao {
            constructor() {
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadData();
                this.updateStats();
            }

            setupEventListeners() {
                // Formul√°rios
                document.getElementById('alunoForm').addEventListener('submit', (e) => this.handleAlunoSubmit(e));
                document.getElementById('professorForm').addEventListener('submit', (e) => this.handleProfessorSubmit(e));
                document.getElementById('turmaForm').addEventListener('submit', (e) => this.handleTurmaSubmit(e));
                document.getElementById('matriculaForm').addEventListener('submit', (e) => this.handleMatriculaSubmit(e));
            }

            handleAlunoSubmit(e) {
                e.preventDefault();
                
                const nome = document.getElementById('alunoNome').value;
                const email = document.getElementById('alunoEmail').value;
                const idade = document.getElementById('alunoIdade').value;

                // Verificar se email j√° existe
                const alunos = LocalStorage.get('alunos');
                if (alunos.some(aluno => aluno.email === email)) {
                    this.showMessage('alunoError', 'Este email j√° est√° cadastrado!');
                    return;
                }

                const aluno = LocalStorage.add('alunos', { nome, email, idade: parseInt(idade) });
                
                this.showMessage('alunoSuccess', 'Aluno cadastrado com sucesso!');
                document.getElementById('alunoForm').reset();
                this.loadAlunos();
                this.updateStats();
                this.updateSelects();
            }

            handleProfessorSubmit(e) {
                e.preventDefault();
                
                const nome = document.getElementById('professorNome').value;
                const email = document.getElementById('professorEmail').value;
                const disciplina = document.getElementById('professorDisciplina').value;

                // Verificar se email j√° existe
                const professores = LocalStorage.get('professores');
                if (professores.some(prof => prof.email === email)) {
                    this.showMessage('professorError', 'Este email j√° est√° cadastrado!');
                    return;
                }

                const professor = LocalStorage.add('professores', { nome, email, disciplina });
                
                this.showMessage('professorSuccess', 'Professor cadastrado com sucesso!');
                document.getElementById('professorForm').reset();
                this.loadProfessores();
                this.updateStats();
                this.updateSelects();
            }

            handleTurmaSubmit(e) {
                e.preventDefault();
                
                const nome = document.getElementById('turmaNome').value;
                const ano = document.getElementById('turmaAno').value;
                const professorId = document.getElementById('turmaProfessor').value;

                const turma = LocalStorage.add('turmas', { nome, ano, professorId });
                
                this.showMessage('turmaSuccess', 'Turma criada com sucesso!');
                document.getElementById('turmaForm').reset();
                this.loadTurmas();
                this.updateStats();
                this.updateSelects();
            }

            handleMatriculaSubmit(e) {
                e.preventDefault();
                
                const alunoId = document.getElementById('matriculaAluno').value;
                const turmaId = document.getElementById('matriculaTurma').value;

                // Verificar se aluno j√° est√° matriculado nesta turma
                const matriculas = LocalStorage.get('matriculas');
                if (matriculas.some(m => m.alunoId === alunoId && m.turmaId === turmaId)) {
                    this.showMessage('matriculaError', 'Aluno j√° est√° matriculado nesta turma!');
                    return;
                }

                const matricula = LocalStorage.add('matriculas', { alunoId, turmaId, data: new Date().toLocaleDateString() });
                
                this.showMessage('matriculaSuccess', 'Matr√≠cula realizada com sucesso!');
                document.getElementById('matriculaForm').reset();
                this.loadMatriculas();
                this.updateStats();
            }

            loadData() {
                this.loadAlunos();
                this.loadProfessores();
                this.loadTurmas();
                this.loadMatriculas();
                this.updateSelects();
            }

            loadAlunos() {
                const alunos = LocalStorage.get('alunos');
                const container = document.getElementById('alunosList');
                
                container.innerHTML = alunos.map(aluno => `
                    <div class="list-item">
                        <div class="list-item-info">
                            <h4>${aluno.nome}</h4>
                            <p>${aluno.email} ‚Ä¢ ${aluno.idade} anos</p>
                        </div>
                        <div class="list-actions">
                            <button class="btn btn-danger btn-small" onclick="sistema.removeAluno('${aluno.id}')">
                                Excluir
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            loadProfessores() {
                const professores = LocalStorage.get('professores');
                const container = document.getElementById('professoresList');
                
                container.innerHTML = professores.map(professor => `
                    <div class="list-item">
                        <div class="list-item-info">
                            <h4>${professor.nome}</h4>
                            <p>${professor.email} ‚Ä¢ ${professor.disciplina}</p>
                        </div>
                        <div class="list-actions">
                            <button class="btn btn-danger btn-small" onclick="sistema.removeProfessor('${professor.id}')">
                                Excluir
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            loadTurmas() {
                const turmas = LocalStorage.get('turmas');
                const professores = LocalStorage.get('professores');
                const container = document.getElementById('turmasList');
                
                container.innerHTML = turmas.map(turma => {
                    const professor = professores.find(p => p.id == turma.professorId);
                    return `
                        <div class="list-item">
                            <div class="list-item-info">
                                <h4>${turma.nome}</h4>
                                <p>${turma.ano} ‚Ä¢ Prof. ${professor ? professor.nome : 'N/A'}</p>
                            </div>
                            <div class="list-actions">
                                <button class="btn btn-danger btn-small" onclick="sistema.removeTurma('${turma.id}')">
                                    Excluir
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            loadMatriculas() {
                const matriculas = LocalStorage.get('matriculas');
                const alunos = LocalStorage.get('alunos');
                const turmas = LocalStorage.get('turmas');
                const container = document.getElementById('matriculasList');
                
                container.innerHTML = matriculas.map(matricula => {
                    const aluno = alunos.find(a => a.id == matricula.alunoId);
                    const turma = turmas.find(t => t.id == matricula.turmaId);
                    return `
                        <div class="list-item">
                            <div class="list-item-info">
                                <h4>${aluno ? aluno.nome : 'N/A'}</h4>
                                <p>${turma ? turma.nome : 'N/A'} ‚Ä¢ ${matricula.data}</p>
                            </div>
                            <div class="list-actions">
                                <button class="btn btn-danger btn-small" onclick="sistema.removeMatricula('${matricula.id}')">
                                    Excluir
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            updateSelects() {
                // Atualizar select de professores
                const professores = LocalStorage.get('professores');
                const professorSelect = document.getElementById('turmaProfessor');
                professorSelect.innerHTML = '<option value="">Selecione um professor...</option>' +
                    professores.map(prof => `<option value="${prof.id}">${prof.nome} - ${prof.disciplina}</option>`).join('');

                // Atualizar select de alunos
                const alunos = LocalStorage.get('alunos');
                const alunoSelect = document.getElementById('matriculaAluno');
                alunoSelect.innerHTML = '<option value="">Selecione um aluno...</option>' +
                    alunos.map(aluno => `<option value="${aluno.id}">${aluno.nome}</option>`).join('');

                // Atualizar select de turmas
                const turmas = LocalStorage.get('turmas');
                const turmaSelect = document.getElementById('matriculaTurma');
                turmaSelect.innerHTML = '<option value="">Selecione uma turma...</option>' +
                    turmas.map(turma => `<option value="${turma.id}">${turma.nome} - ${turma.ano}</option>`).join('');
            }

            updateStats() {
                const alunos = LocalStorage.get('alunos');
                const professores = LocalStorage.get('professores');
                const turmas = LocalStorage.get('turmas');
                const matriculas = LocalStorage.get('matriculas');

                document.getElementById('totalAlunos').textContent = alunos.length;
                document.getElementById('totalProfessores').textContent = professores.length;
                document.getElementById('totalTurmas').textContent = turmas.length;
                document.getElementById('totalMatriculas').textContent = matriculas.length;
            }

            removeAluno(id) {
                if (confirm('Tem certeza que deseja excluir este aluno?')) {
                    LocalStorage.remove('alunos', id);
                    this.loadAlunos();
                    this.updateStats();
                    this.updateSelects();
                }
            }

            removeProfessor(id) {
                if (confirm('Tem certeza que deseja excluir este professor?')) {
                    LocalStorage.remove('professores', id);
                    this.loadProfessores();
                    this.updateStats();
                    this.updateSelects();
                }
            }

            removeTurma(id) {
                if (confirm('Tem certeza que deseja excluir esta turma?')) {
                    LocalStorage.remove('turmas', id);
                    this.loadTurmas();
                    this.updateStats();
                    this.updateSelects();
                }
            }

            removeMatricula(id) {
                if (confirm('Tem certeza que deseja excluir esta matr√≠cula?')) {
                    LocalStorage.remove('matriculas', id);
                    this.loadMatriculas();
                    this.updateStats();
                }
            }

            showMessage(elementId, message) {
                const element = document.getElementById(elementId);
                element.textContent = message;
                element.style.display = 'block';
                
                setTimeout(() => {
                    element.style.display = 'none';
                }, 3000);
            }
        }

        // Inicializar sistema
        const sistema = new SistemaGestao();
    </script>
</body>
</html>